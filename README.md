# Encrypter
> The application meant to generate RSA key pair and encrypt provided file with that key.

## Table of contents
* [General info](#general-info)
* [Technologies](#technologies)
* [Setup](#setup)
* [Users](#users)
* [Usage](#usage)
* [Encryption](#encryption)
* [TODO](#todo)

## General info
The app is a nodejs server that allows user to encrypt any file through the api.

## Technologies
* Nestjs
* TypeScript

## Setup
To install the app just go to the root directory and type: `npm install`.  
The app use environment variable `JWT_SECRET`. Set this to unique string and change it everytime the app is lunched. This `JWT_SECRET` is meant to sign JWT token that is generated by the app.  
If `JWT_SECRET` is not set, the default value is used.   

## Users
You can use two hardcoded users for testing:
```javascript
{
  email: 'john@change.me',
  password: 'changeme1',
},
{
  email: 'mary@change.mea',
  password: 'changeme2',
},
```
## Usage
Start the app by issuing command `npm run start:prod` in project root directory.  
The app will listen on port 3000 by default. You can change it by setting `PORT` environment variable.  
When app is running, you can access api documentation from your browser: http://localhost:{PORT}/apiDoc  

## Encryption
Options used in keys generation:  
```javascript
{
    modulusLength: 4096,
    publicKeyEncoding: {
      type: 'spki',
      format: 'pem',
    },
    privateKeyEncoding: {
      type: 'pkcs1',
      format: 'pem',
    },
}
```
Encryption alghoritm options:  
```javascript
{
    padding: constants.RSA_PKCS1_OAEP_PADDING,
    oaepHash: 'sha256',
};
```
Since RSA allows encryption of small data only, the app will split the file to 200 byte chunks, encrypt each chunk and concatenate all of them. Each encrypted chunk size is 512 bytes. To decrypt the file, the data has to be split into 512 byte chunks, then decrypted.

## TODO
* add logger, currently all errors are reported to the console
* expand e2e test, only one test is created
